---
import { getSocialLinks } from '../lib/social-links'

const { channel } = Astro.props

const socialLinks = getSocialLinks(import.meta.env, Astro)
const hasSocialLinks = socialLinks.length > 0
const hasDescription = typeof channel?.descriptionHTML === 'string' && channel.descriptionHTML.length > 0
const shouldRenderFooter = hasDescription || hasSocialLinks
---

{
  shouldRenderFooter && (
    <footer class="site-footer">
      {hasDescription && <div class="text-box site-intro site-intro--plain" set:html={channel?.descriptionHTML} />}
      {hasSocialLinks && (
        <div class="footer-icons">
          {socialLinks.map((link) => (
            <a href={link.href} title={link.alt} target="_blank" rel="noopener noreferrer" class="footer-icons__link">
              <img {...link.icon} alt={link.alt} class="social-icon" width="3em" loading="lazy" decoding="async" />
            </a>
          ))}
        </div>
      )}
    </footer>
  )
}
