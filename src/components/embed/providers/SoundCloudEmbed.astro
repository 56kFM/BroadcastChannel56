---
import SafeIframe from '../SafeIframe.astro'

const { url } = Astro.props as { url: string }

// Build a SoundCloud player URL using the original track/playlist URL.
const player = new URL('https://w.soundcloud.com/player/')
player.searchParams.set('url', url)
player.searchParams.set('auto_play', 'false')
player.searchParams.set('hide_related', 'false')
player.searchParams.set('show_comments', 'false')
player.searchParams.set('show_user', 'true')
player.searchParams.set('show_reposts', 'false')
player.searchParams.set('visual', 'false')

const src = player.toString()
---

<SafeIframe
  src={src}
  title="SoundCloud player"
  style="height:166px;border-radius:8px;overflow:hidden;color-scheme:dark;background-color:#000;"
/>
