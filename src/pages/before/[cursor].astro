---
import List from '../../components/list.astro'
import { getChannelInfo } from '../../lib/telegram'

const channel = await getChannelInfo(Astro, {
  before: Astro.params.cursor,
})

// If Telegram returns no posts for this cursor, avoid an empty page
if (!Array.isArray(channel?.posts) || channel.posts.length === 0) {
  return Astro.redirect('/')
}

channel.seo = { noindex: true }
---

<List channel={channel} paginationGap={true} />
